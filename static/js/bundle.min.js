function Nav(){this.toggleBtn=document.querySelector(".nav-btn"),this.body=document.getElementsByTagName("body")[0],this.nav__base=document.querySelector(".nav__base"),this.backdrop=this.nav__base.querySelector(".backdrop"),this.dropdowns=document.querySelectorAll(".dropdown"),this.dropdownOpen=!1,this.actionTimeout=!1,this.open=function(){return this.body.classList.contains("nav-open")};for(var t=this,e=0;e<this.dropdowns.length;e++)this.dropdowns[e].addEventListener("click",function(e){return function(){t.actionTimeout||(t.dropdowns[e].classList.add("open"),t.dropdownOpen=!0,t.toggleBtn.classList.add("close-sub-menu"))}}(e));this.backdrop.addEventListener("click",function(t){t.preventDefault(),this.close()}.bind(this)),this.toggleBtn.addEventListener("click",function(n){if(n.preventDefault(),!this.actionTimeout)if(this.actionTimeout=!0,setTimeout(function(){t.actionTimeout=!1},200),this.dropdownOpen){this.dropdownOpen=!1,this.toggleBtn.classList.remove("close-sub-menu");var i=document.querySelectorAll(".dropdown.open");for(e=0;e<i.length;e++)i[e].classList.remove("open")}else this.body.classList.contains("nav-open")?this.close():this.body.classList.add("nav-open")}.bind(this)),this.startX=0,this.startY=0,this.nav__base.addEventListener("touchstart",function(t){this.open()&&(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY)}.bind(this),!1),this.nav__base.addEventListener("touchend",function(t){this.open()&&this.startX-t.changedTouches[0].clientX<-50&&Math.abs(this.startY-t.changedTouches[0].clientY)<Math.abs(this.startX-t.changedTouches[0].clientX)&&this.close()}.bind(this),!1),this.close=function(){t.actionTimeout=!0,setTimeout(function(){t.actionTimeout=!1},200),this.dropdownOpen=!1,this.toggleBtn.classList.remove("close-sub-menu");var n=document.querySelectorAll(".dropdown.open");for(e=0;e<n.length;e++)n[e].classList.remove("open");this.body.classList.remove("nav-open")}}function transitionEndEventName(){var t,e=document.createElement("div"),n={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(n.hasOwnProperty(t)&&void 0!==e.style[t])return n[t];return!1}function jRouter(){return this.initialized=!0,console.info("Checking jRouter requirements . . ."),Modernizr.history?console.info("History API: Pass"):(console.warn("History API: Fail"),this.initialized=!1),transitionend?console.info("transitionend event: Pass"):console.warn("transitionend event: Fail"),Map&&Map.prototype.keys?console.info("ES6 Map: Pass"):(console.warn("ES6 Map: Fail"),this.initialized=!1),Modernizr.promises?console.info("ES6 Promises: Pass"):(console.warn("ES6 Promises: Fail"),this.initialized=!1),this.initialized?(console.info("All requirements met. Initializing jRouter."),this.routes=new Map,this._onChanged=this._onChanged.bind(this),this._currentView=document.querySelector(".viewing"),this._addRoutes(),void window.addEventListener("popstate",function(){router.go(window.location.href)})):(console.error("Some requirements were not met. Terminating jRouter."),this)}!function(){/(?:ipod|iphone|ipad)/i.test(navigator.userAgent)&&document.getElementsByTagName("html")[0].classList.add("js-is-idevice")}(),window.nav=new Nav;var router,transitionend=transitionEndEventName();jRouter.prototype.addRoute=function(t,e){this.routes.has(t)||this.routes.set(t,e)},jRouter.prototype._addRoutes=function(){this._removeRoutes();var t,e,n=document.querySelectorAll('a[href^="/"]');for(t=0;t<n.length;t++)e=n[t],e.marked||(e.marked=!0,e.addEventListener("click",function(t){return function(e){e.preventDefault(),router.go(t.getAttribute("href"))}}(e),!1));var i,o,s,r=document.querySelectorAll(".page__base");for(s=0;s<r.length;s++)i=r[s],i.getAttribute("data-route")&&(o=i.getAttribute("data-route"),this.addRoute(new RegExp(o,"i"),i))},jRouter.prototype._removeRoutes=function(){this.routes.clear()},jRouter.prototype._onChanged=function(){var t=window.location.pathname,e=Array.from(this.routes.keys()),n=e.find(function(e){return e.test(t)}),i=n.exec(t);if(n){if(this._newView=this.routes.get(n),this._isTransitioningBetweenViews)return Promise.resolve();this._isTransitioningBetweenViews=!0;var o=Promise.resolve();if(this._currentView){if(this._currentView===this._newView)return this._isTransitioningBetweenViews=!1,this._currentView.update(i);o=this._currentView.out(i)}return o.then(function(){return this._currentView=this._newView,this._isTransitioningBetweenViews=!1,this._newView.in(i)}.bind(this))}},jRouter.prototype.go=function(t){return window.history.pushState(null,null,t),this._addRoutes(),this._onChanged()},window.addEventListener("load",function(){router=new jRouter}),HTMLDivElement.prototype._spinnerTimeout=void 0,HTMLDivElement.prototype._view=null,HTMLDivElement.prototype._isRemote=function(){return null!==this.getAttribute("data-remote")},HTMLDivElement.prototype._hideSpinner=function(){this.classList.remove("pending")},HTMLDivElement.prototype._showSpinner=function(){this.classList.add("pending")},HTMLDivElement.prototype._initScripts=function(t){var e=t.getAttribute("data-scripts");if(null!==e){e=e.split(",");for(var n=0,i=e.length;n<i;n++){var o=document.createElement("script");o.src=e[n],document.body.appendChild(o)}}},HTMLDivElement.prototype._loadView=function(t){var e=setTimeout(function(){this._showSpinner()}.bind(this),500);this.loaded=!0;var n=new XMLHttpRequest;n.onload=function(t){var n=t.target.response.querySelector(".page__base.viewing");this.innerHTML=n.innerHTML,this._initScripts(n),router._addRoutes(),clearTimeout(e),this._hideSpinner()}.bind(this),n.responseType="document",n.open("GET",t[0]+"?partial"),n.send()},HTMLDivElement.prototype.in=function(t){return console.info("ViewElement.in(",t,")"),this._isRemote()&&!this.loaded&&this._loadView(t),new Promise(function(t){var e=function(){this.removeEventListener(transitionend,e),t()};this.style.overflow="",this.style.height="",this.classList.add("viewing"),this.addEventListener(transitionend,e)}.bind(this))},HTMLDivElement.prototype.out=function(t){return console.info("ViewElement.out(",t,")"),new Promise(function(t){var e=function(){window.scrollTo(0,0),this.style.overflow="hidden",this.style.height=0,this.removeEventListener(transitionend,e),t()};window.nav.close(),this.classList.remove("viewing"),this.addEventListener(transitionend,e)}.bind(this))},HTMLDivElement.prototype.update=function(t){console.info("ViewElement.update(",t,")"),window.nav.close();var e=function(){this.removeEventListener("animationend",e),this.classList.remove("fadeIn")}.bind(this);return this.classList.add("animated"),this.classList.add("fadeIn"),this.addEventListener("animationend",e),Promise.resolve()};